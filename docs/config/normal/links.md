
# links

## TODO: Добавить описание калькуляции с примерами

описание настроек соединений с устройствами

|Свойство|Значение|
|----|---:|
|Тип|массив JSON|
|Обязательный|Да|

----

## Пример

```json
{
    "links": [
        {
            "id": 3,
            "name": "SerialConnection",
            "description": "usb1",
            "protocol": "mb-rtu",
            "port": "/dev/ttyUSB1",
            "baudRate": 115200,
            "dataBits": 8,
            "parity": "N",
            "stopBits": 2,
            "timeoutMs": 100,
            "reqestMs": 100,
            "devices": [
                {
                    "id": 75,
                    "address": 42,
                    "description": "device name",
                    "groupRequest": "all",
                    "items": [
                        {
                            "id": 5,
                            "enable": true,
                            "address": 41,
                            "type": "32bit1234",
                            "direction": "in",
                            "description": "тест 32bit1234",
                            "buffer": {
                                "enable": true,
                                "size": 23
                            },
                            "remoteAccess": {
                                "restapi": {
                                    "enable": true
                                }
                            },
                            "properties": [
                                {
                                    "key": "mech",
                                    "value": "M34"
                                },
                                {
                                    "key": "proj",
                                    "value": "demo-1212"
                                }
                            ],
                            "tags": [
                                "1",
                                "2",
                                "3"
                            ],
                            "bitMap": [
                                {
                                    "bit": 0,
                                    "description": "Авария ркс!",
                                    "on": "Авария ркс!",
                                    "off": "Нет Авария ркс!",
                                    "tags": [
                                        "11",
                                        "22",
                                        "33"
                                    ],
                                    "buffer": {
                                        "enable": true,
                                        "size": 17
                                    },
                                    "properties": [
                                        {
                                            "key": "mech",
                                            "value": "m1"
                                        },
                                        {
                                            "key": "DescritInput",
                                            "value": "RKS"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "id": 2,
            "name": "TCPConnection",
            "description": "tcp502",
            "protocol": "mb-tcp",
            "port": "502",
            "ip": "192.168.22.132",
            "timeoutMs": 100,
            "reqestMs": 100,
            "devices": [
                {
                    "id": 22,
                    "address": 156,
                    "description": "device 2",
                    "groupRequest": "all",
                    "items": [
                        {
                            "id": 543,
                            "enable": true,
                            "address": 41,
                            "type": "float3412",
                            "direction": "in",
                            "tags": [
                                "t1",
                                "second"
                            ],
                            "description": "тест флоат float3412",
                            "properties": [
                                {
                                    "key": "mech",
                                    "value": "M34"
                                },
                                {
                                    "key": "proj",
                                    "value": "demo-1212"
                                }
                            ],
                            "buffer": {
                                "enable": true,
                                "size": 100
                            },
                            "remoteAccess": {
                                "restapi": {
                                    "enable": true,
                                    "accessList": [
                                        {
                                            "ip": "127.0.0.1",
                                            "read": true
                                        }
                                    ]
                                }
                            }
                        }
                    ]
                }
            ]
        }
    ]
}
```

----

## links.id

Уникальный номер соединения

|Свойство|Значение|
|----|---:|
|Тип|int|
|Обязательный|Да|
|Значение|-2147483648...2147483647|

Должен быть уникальным в пределах проекта

----

## links.name

Имя соединения. Используется в режиме test и monitor

|Свойство|Значение|
|----|---:|
|Тип|string|
|Обязательный|Да|
|Значение|Произвольная строка|

----

## links.description

Описание соединения.  Служит в качестве meta информации

|Свойство|Значение|
|----|---:|
|Тип|string|
|Обязательный|Нет|
|Значение|Произвольная строка|

----

## links.protocol

Тип протокола передачи данных

|Свойство|Значение|
|----|---:|
|Тип|enum|
|Обязательный|Да|
|Значение|["mb-tcp" "mb-rtu"]|

для  **protocol**=**mb-tcp** пара **ip**:**port** должна быть уникальна
в пределах проекта

для  **protocol**=**mb-rtu** **port** должн быть уникальным
в пределах проекта

----

## links.ip

Адрес устройства

|Свойство|Значение|
|----|---:|
|Тип|string|
|Обязательный|Да|
|Значение|"ddd.ddd.ddd.ddd"|

----

## links.port

Порт для соединения с устройством

|Свойство|Значение|
|----|---:|
|Тип|string|
|Обязательный|Да|
|Значение для **protocol**=**mb-tcp**|"1"..."65535"|
|Значение для **protocol**=**mb-rtu**|строка типа ["COM1" "/dev/ttyUSB0"]|

----

## links.baudRate

Скорость передачи банных

|Свойство|Значение|
|----|---:|
|Тип|ENUM|
|Обязательный|Да для  **protocol**=**mb-rtu**|
|Значение|[50 75 110 134 150 200 300 600 1200 1800 2400 4800 9600 19200 38400 57600 115200 230400 460800 500000 576000 921600 1000000 1152000 1500000 2000000 2500000 3000000 3500000 4000000]|

----

## links.dataBits

Биты данных

|Свойство|Значение|
|----|---:|
|Тип|ENUM|
|Обязательный|Да для  **protocol**=**mb-rtu**|
|Значение|[5 6 7 8 ]|

----

## links.parity  

Бит чётности

|Свойство|Значение|
|----|---:|
|Тип|ENUM|
|Обязательный|Да для  **protocol**=**mb-rtu**|
|Значение|["N" "E" "O"]|

----

## links.stopBits  

Стоп-бит

|Свойство|Значение|
|----|---:|
|Тип|ENUM|
|Обязательный|Да для  **protocol**=**mb-rtu**|
|Значение|[1 2]|

----

## links.timeoutMs  

Таймаут запроса в миллисекундах

|Свойство|Значение|
|----|---:|
|Тип|int|
|Обязательный|Да|
|Значение|1...9223372036854775807|

----

## links.reqestMs  

Пауза между запросами в миллисекундах

|Свойство|Значение|
|----|---:|
|Тип|int|
|Обязательный|Да|
|Значение|1...9223372036854775807|

----

## links.devices  

Описание настроек устройста

|Свойство|Значение|
|----|---:|
|Тип|массив JSON|
|Обязательный|Да|

----

### devices.id

уникальный номер устройства в пределах проекта

|Свойство|Значение|
|----|---:|
|Тип|int|
|Обязательный|Да|
|Значение|-2147483648...2147483647|

Должен быть уникальным в пределах проекта

----

### devices.address

Адрес устройства

|Свойство|Значение|
|----|---:|
|Тип|int|
|Обязательный|Да|
|Значение|1...247|

должн быть уникальным в пределах родительского **link'а**

----

### devices.description

Описание устройства.  Служит в качестве meta информации

|Свойство|Значение|
|----|---:|
|Тип|string|
|Обязательный|Нет|
|Значение|Произвольная строка|

----

### devices.groupRequest

Тип запроса данных

|Свойство|Значение|
|----|---:|
|Тип|ENUM|
|Обязательный|ДА|
|Значение|["none" "each" "all"]|

**none** запрашивать каждую переменную отдельно.
Используется в случае если устройство не поддерживает групповые запросы

**each** запрашиват переменные группами непрерывных адересов

**all** запрашивать все переменные в промежутках от минимального до максимального значения адреса пределенного в links[x].devices[x].items[x].address. Используется в случае если у устройства все регистры карты памяти являются переменными.
В некоторых случаях может ускорить опрос устройства

----

### devices.items  

Описание переменных устройства

|Свойство|Значение|
|----|---:|
|Тип|массив JSON|
|Обязательный|Да|

----
